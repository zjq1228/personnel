<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dj.personnel.mapper.EmployeeMapper">

 
	<select id="findAll"  resultType="com.dj.personnel.pojo.Employee">
		SELECT
			e.id,
			e.`name`,
			e.card_id,
			e.address,
			e.mobile,
			e.qq,
			e.sex,
			e.email,
			e.create_time,
			d.`name` AS bumen,
			j.`name` AS zhiwei
		FROM
			employee e
		LEFT JOIN department d ON e.department_id = d.id
		LEFT JOIN job j ON e.job_id = j.id
		<where>
			<if test="query.name != null and query.name !='' ">
				e.name like "%"#{query.name}"%"
			</if>
			<if test="query.sex != null ">
				and	e.sex = #{query.sex}
			</if>
			<if test="query.mobile != null and query.mobile !='' ">
				and e.mobile like "%"#{query.mobile}"%"
			</if>
			<if test="query.departmentId != null ">
				and e.department_id = #{query.departmentId}
			</if>
			<if test="query.jobId != null ">
				and e.job_id = #{query.jobId}
			</if>
		</where>
	</select>
	


</mapper>